# As-Is Analysis Document (PostgreSQL → Oracle)

## Document Information

| Item | Details |
|------|---------|
| **Project Name** | {{project.name}} |
| **Migration Type** | PostgreSQL → Oracle |
| **Document Type** | As-Is Analysis |
| **Generated Date** | {{generated_date}} |
| **Version** | {{version}} |

---

## 1. Source Artifacts Inventory

### 1.1 Database Object Inventory

**Source:** PostgreSQL catalog queries and DDL extraction

| Object Type | Count | Source |
|-------------|-------|--------|
| Tables | {{metadata.source_analysis.database.tables}} | `pg_tables` catalog |
| Views | {{metadata.source_analysis.database.views}} | `pg_views` catalog |
| Materialized Views | {{metadata.source_analysis.database.materializedViews}} | `pg_matviews` catalog |
| Functions | {{metadata.source_analysis.database.functions}} | `pg_proc` catalog |
| Stored Procedures | {{metadata.source_analysis.database.stored_procedures}} | `pg_proc` catalog |
| Triggers | {{metadata.source_analysis.database.triggers}} | `pg_trigger` catalog |
| Indexes | {{metadata.source_analysis.database.indexes}} | `pg_indexes` catalog |
| Sequences | {{metadata.source_analysis.database.sequences}} | `pg_sequences` catalog |
| Constraints | {{metadata.source_analysis.database.constraints}} | `pg_constraint` catalog |
| Partitioned Tables | {{metadata.source_analysis.database.partitionedTables}} | `pg_partitioned_table` |

### 1.2 Table Inventory

**Source:** DDL extraction from `pg_dump` or information_schema

{{#if metadata.tables}}
| Table Name | Schema | Columns | Rows | Size | Has PG-Specific Types | Source Location |
|------------|--------|---------|------|------|----------------------|-----------------|
{{#each metadata.tables}}
| {{this.name}} | {{this.schema}} | {{this.columns}} | {{this.rows}} | {{this.size}} | {{this.hasPgTypes}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Table inventory requires DDL or catalog extraction.
{{/if}}

### 1.3 Application Code Inventory

**Source:** Application source code scan

| Component | Count | PostgreSQL Dependencies | Source |
|-----------|-------|------------------------|--------|
| Java/Application Files | {{metadata.source_analysis.total_files}} | {{metadata.source_analysis.pgDependentFiles}} | Code scan |
| Repository Classes | {{metadata.source_analysis.repositoryCount}} | {{metadata.source_analysis.nativeQueryRepos}} | Spring Data scan |
| Entity Classes | {{metadata.source_analysis.entityCount}} | {{metadata.source_analysis.pgTypeEntities}} | JPA scan |
| Native SQL Queries | {{metadata.source_analysis.nativeQueryCount}} | All require review | @Query extraction |
| MyBatis Mappers | {{metadata.source_analysis.mybatisCount}} | All require review | XML scan |

---

## 2. PostgreSQL Data Type Analysis

### 2.1 Data Type Inventory

**Source:** DDL analysis and column type extraction

{{#if metadata.dataTypes}}
| PostgreSQL Type | Occurrences | Tables | Oracle Equivalent | Complexity | Source Evidence |
|-----------------|-------------|--------|-------------------|------------|-----------------|
{{#each metadata.dataTypes}}
| `{{this.pgType}}` | {{this.count}} | {{this.tables}} | {{this.oracleType}} | {{this.complexity}} | `{{this.source}}` |
{{/each}}
{{else}}
| PostgreSQL Type | Oracle Equivalent | Notes |
|-----------------|-------------------|-------|
| SERIAL | NUMBER + SEQUENCE | Requires trigger for auto-increment |
| BIGSERIAL | NUMBER(19) + SEQUENCE | Requires trigger |
| BOOLEAN | NUMBER(1) | 0/1 mapping |
| TEXT | CLOB | Direct mapping |
| JSONB | JSON (21c+) / CLOB | Feature availability varies |
| UUID | RAW(16) / VARCHAR2(36) | Consider SYS_GUID() |
| BYTEA | BLOB | Direct mapping |
| ARRAY[] | VARRAY / Nested Table | Requires redesign |

> Data type inventory requires DDL analysis.
{{/if}}

### 2.2 PostgreSQL-Specific Types Detected

**Source:** Column definition extraction

{{#if metadata.pgSpecificTypes}}
{{#each metadata.pgSpecificTypes}}
#### Type: `{{this.type}}`

**Occurrences:** {{this.count}}

**Affected Tables:**
| Table | Column | Source Location |
|-------|--------|-----------------|
{{#each this.columns}}
| {{this.table}} | {{this.column}} | `{{this.source}}` |
{{/each}}

**Oracle Migration:**
- **Suggested Type:** `{{this.oracleType}}`
- **Complexity:** {{this.complexity}}
- **Notes:** {{this.notes}}

---

{{/each}}
{{else}}
> **Not found in source:** PostgreSQL-specific type detection requires DDL parsing.
{{/if}}

### 2.3 ARRAY Type Usage

**Source:** ARRAY column extraction

{{#if metadata.arrayTypes}}
| Table | Column | Array Type | Dimensions | Oracle Strategy | Source |
|-------|--------|------------|------------|-----------------|--------|
{{#each metadata.arrayTypes}}
| {{this.table}} | {{this.column}} | {{this.elementType}}[] | {{this.dimensions}} | {{this.oracleStrategy}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** No ARRAY types detected or analysis not performed.
{{/if}}

### 2.4 JSON/JSONB Usage

**Source:** JSON column and operator extraction

{{#if metadata.jsonUsage}}
| Table | Column | Type | JSON Operators Used | Oracle Strategy | Source |
|-------|--------|------|---------------------|-----------------|--------|
{{#each metadata.jsonUsage}}
| {{this.table}} | {{this.column}} | {{this.type}} | {{this.operators}} | {{this.oracleStrategy}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** No JSON/JSONB usage detected.
{{/if}}

---

## 3. SQL Statement Analysis

### 3.1 PostgreSQL-Specific SQL Patterns

**Source:** SQL script and application query extraction

{{#if metadata.sqlPatterns}}
| Pattern | Occurrences | Locations | Oracle Equivalent | Complexity |
|---------|-------------|-----------|-------------------|------------|
{{#each metadata.sqlPatterns}}
| `{{this.pattern}}` | {{this.count}} | {{this.locations}} | {{this.oracleEquiv}} | {{this.complexity}} |
{{/each}}
{{else}}
| Pattern | Oracle Equivalent |
|---------|-------------------|
| LIMIT n OFFSET m | FETCH FIRST n ROWS ONLY OFFSET m |
| RETURNING | RETURNING INTO |
| ON CONFLICT | MERGE |
| ILIKE | UPPER() LIKE UPPER() |
| array_agg() | LISTAGG() |
| string_agg() | LISTAGG() |
| :: cast | CAST() or TO_ functions |
| NOW() | SYSDATE or SYSTIMESTAMP |
| INTERVAL | INTERVAL or NUMTODSINTERVAL |

> SQL pattern analysis requires query extraction.
{{/if}}

### 3.2 Application Native Queries

**Source:** @Query annotation and SQL extraction from application code

{{#if metadata.nativeQueries}}
{{#each metadata.nativeQueries}}
#### Query in: {{this.file}}

**Source Location:** `{{this.location}}`

**Original PostgreSQL Query:**
```sql
{{{this.query}}}
```

**PostgreSQL Features Used:**
{{#each this.pgFeatures}}
- {{this}}
{{/each}}

**Migration Complexity:** {{this.complexity}}

---

{{/each}}
{{else}}
> **Not found in source:** Native query extraction requires application code analysis.
{{/if}}

### 3.3 View Definitions

**Source:** View DDL extraction

{{#if metadata.views}}
{{#each metadata.views}}
#### View: {{this.name}}

**Source:** `{{this.source}}`

```sql
{{{this.definition}}}
```

**PostgreSQL Features:**
{{#each this.pgFeatures}}
- {{this}}
{{/each}}

---

{{/each}}
{{else}}
> **Not found in source:** View definitions require DDL extraction.
{{/if}}

---

## 4. PL/pgSQL Analysis

### 4.1 Function Inventory

**Source:** pg_proc catalog and function definition extraction

{{#if metadata.functions}}
| Function Name | Parameters | Return Type | Language | LOC | PG-Specific Features | Source |
|---------------|------------|-------------|----------|-----|---------------------|--------|
{{#each metadata.functions}}
| {{this.name}} | {{this.params}} | {{this.returnType}} | {{this.language}} | {{this.loc}} | {{this.pgFeatures}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Function inventory requires pg_proc extraction.
{{/if}}

### 4.2 Function Details with PL/pgSQL Code

**Source:** Function body extraction

{{#if metadata.functionDetails}}
{{#each metadata.functionDetails}}
#### Function: {{this.name}}

**Source:** `{{this.source}}`

**Signature:**
```sql
{{{this.signature}}}
```

**PL/pgSQL Body:**
```sql
{{{this.body}}}
```

**PostgreSQL-Specific Constructs:**
| Construct | Line | Oracle Equivalent | Complexity |
|-----------|------|-------------------|------------|
{{#each this.constructs}}
| {{this.construct}} | {{this.line}} | {{this.oracleEquiv}} | {{this.complexity}} |
{{/each}}

---

{{/each}}
{{else}}
> **Not found in source:** Function details require body extraction.
{{/if}}

### 4.3 Trigger Analysis

**Source:** Trigger definition extraction

{{#if metadata.triggers}}
| Trigger Name | Table | Event | Timing | Function | Source |
|--------------|-------|-------|--------|----------|--------|
{{#each metadata.triggers}}
| {{this.name}} | {{this.table}} | {{this.event}} | {{this.timing}} | {{this.function}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Trigger inventory requires pg_trigger extraction.
{{/if}}

---

## 5. Index Analysis

### 5.1 Index Inventory

**Source:** pg_indexes catalog extraction

{{#if metadata.indexes}}
| Index Name | Table | Type | Columns | Unique | Source |
|------------|-------|------|---------|--------|--------|
{{#each metadata.indexes}}
| {{this.name}} | {{this.table}} | {{this.type}} | {{this.columns}} | {{this.unique}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Index inventory requires catalog extraction.
{{/if}}

### 5.2 PostgreSQL-Specific Index Types

**Source:** Advanced index type extraction

{{#if metadata.advancedIndexes}}
| Index Type | Count | Tables | Oracle Support | Migration Strategy |
|------------|-------|--------|----------------|-------------------|
{{#each metadata.advancedIndexes}}
| {{this.type}} | {{this.count}} | {{this.tables}} | {{this.oracleSupport}} | {{this.strategy}} |
{{/each}}
{{else}}
| Index Type | Oracle Equivalent | Notes |
|------------|-------------------|-------|
| GIN | Function-based / Domain Index | For JSONB, ARRAY |
| GiST | R-Tree / Spatial | For geometry |
| BRIN | None | Manual partitioning |
| Hash | None / B-tree | Performance test needed |

> Advanced index analysis requires DDL extraction.
{{/if}}

### 5.3 Partial Index Analysis

**Source:** Partial index WHERE clause extraction

{{#if metadata.partialIndexes}}
| Index Name | Table | Condition | Oracle Strategy | Source |
|------------|-------|-----------|-----------------|--------|
{{#each metadata.partialIndexes}}
| {{this.name}} | {{this.table}} | `{{this.condition}}` | {{this.strategy}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** No partial indexes detected or analysis not performed.
{{/if}}

---

## 6. Constraint Analysis

### 6.1 Constraint Inventory

**Source:** pg_constraint catalog extraction

{{#if metadata.constraints}}
| Constraint Type | Count | Tables | Oracle Support | Source |
|-----------------|-------|--------|----------------|--------|
{{#each metadata.constraints}}
| {{this.type}} | {{this.count}} | {{this.tables}} | {{this.oracleSupport}} | `{{this.source}}` |
{{/each}}
{{else}}
| Constraint Type | Oracle Support |
|-----------------|----------------|
| PRIMARY KEY | Full support |
| FOREIGN KEY | Full support |
| UNIQUE | Full support |
| CHECK | Full support |
| EXCLUDE | Not supported - requires trigger |
| NOT NULL | Full support |

> Constraint inventory requires catalog extraction.
{{/if}}

### 6.2 Check Constraints with PostgreSQL Functions

**Source:** Check constraint definition extraction

{{#if metadata.checkConstraints}}
| Constraint Name | Table | Expression | Oracle Compatibility | Source |
|-----------------|-------|------------|---------------------|--------|
{{#each metadata.checkConstraints}}
| {{this.name}} | {{this.table}} | `{{this.expression}}` | {{this.oracleCompat}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Check constraint analysis requires definition extraction.
{{/if}}

---

## 7. Sequence Analysis

### 7.1 Sequence Inventory

**Source:** pg_sequences catalog extraction

{{#if metadata.sequences}}
| Sequence Name | Start | Increment | Min | Max | Used By | Source |
|---------------|-------|-----------|-----|-----|---------|--------|
{{#each metadata.sequences}}
| {{this.name}} | {{this.start}} | {{this.increment}} | {{this.min}} | {{this.max}} | {{this.usedBy}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Sequence inventory requires catalog extraction.
{{/if}}

### 7.2 Identity Columns (PostgreSQL 10+)

**Source:** IDENTITY column extraction

{{#if metadata.identityColumns}}
| Table | Column | Generation | Strategy | Source |
|-------|--------|------------|----------|--------|
{{#each metadata.identityColumns}}
| {{this.table}} | {{this.column}} | {{this.generation}} | {{this.strategy}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Identity column analysis requires DDL extraction.
{{/if}}

---

## 8. PostgreSQL Extensions Analysis

### 8.1 Installed Extensions

**Source:** pg_extension catalog

{{#if metadata.extensions}}
| Extension | Version | Used Objects | Oracle Alternative | Source |
|-----------|---------|--------------|-------------------|--------|
{{#each metadata.extensions}}
| {{this.name}} | {{this.version}} | {{this.usedObjects}} | {{this.oracleAlternative}} | `{{this.source}}` |
{{/each}}
{{else}}
| Common Extension | Oracle Alternative |
|------------------|-------------------|
| uuid-ossp | SYS_GUID() |
| pgcrypto | DBMS_CRYPTO |
| postgis | Oracle Spatial |
| pg_trgm | Oracle Text |
| hstore | Custom table or JSON |

> Extension detection requires pg_extension query.
{{/if}}

### 8.2 Extension Function Usage

**Source:** Function call extraction from SQL

{{#if metadata.extensionUsage}}
| Extension | Function | Occurrences | Locations | Oracle Migration |
|-----------|----------|-------------|-----------|------------------|
{{#each metadata.extensionUsage}}
| {{this.extension}} | {{this.function}} | {{this.count}} | {{this.locations}} | {{this.oracleMigration}} |
{{/each}}
{{else}}
> **Not found in source:** Extension usage analysis requires SQL parsing.
{{/if}}

---

## 9. Partitioning Analysis

### 9.1 Partitioned Table Inventory

**Source:** pg_partitioned_table catalog

{{#if metadata.partitioning}}
| Table | Partition Type | Partition Key | Partitions | Size | Source |
|-------|----------------|---------------|------------|------|--------|
{{#each metadata.partitioning}}
| {{this.table}} | {{this.type}} | {{this.key}} | {{this.count}} | {{this.size}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Partitioning analysis requires catalog extraction.
{{/if}}

### 9.2 Partition Details

**Source:** Partition definition extraction

{{#if metadata.partitionDetails}}
{{#each metadata.partitionDetails}}
#### Table: {{this.table}}

**Partition Type:** {{this.type}}

**Partition Key:** {{this.key}}

**Partitions:**
| Partition Name | Bounds | Rows | Size | Source |
|----------------|--------|------|------|--------|
{{#each this.partitions}}
| {{this.name}} | {{this.bounds}} | {{this.rows}} | {{this.size}} | `{{this.source}}` |
{{/each}}

**Oracle Strategy:** {{this.oracleStrategy}}

---

{{/each}}
{{else}}
> **Not found in source:** Partition details require DDL extraction.
{{/if}}

---

## 10. Application ORM Analysis

### 10.1 JPA Entity Analysis

**Source:** Entity class scanning

{{#if metadata.entities}}
| Entity Class | Table | PostgreSQL Annotations | Native Queries | Source |
|--------------|-------|----------------------|----------------|--------|
{{#each metadata.entities}}
| {{this.class}} | {{this.table}} | {{this.pgAnnotations}} | {{this.nativeQueries}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Entity analysis requires application code scan.
{{/if}}

### 10.2 Repository Native Query Analysis

**Source:** @Query annotation extraction

{{#if metadata.repositoryQueries}}
{{#each metadata.repositoryQueries}}
#### Repository: {{this.class}}

**Source:** `{{this.source}}`

| Method | Query Type | PostgreSQL Features | Rewrite Required |
|--------|------------|---------------------|------------------|
{{#each this.methods}}
| {{this.method}} | {{this.type}} | {{this.pgFeatures}} | {{this.rewriteRequired}} |
{{/each}}

{{/each}}
{{else}}
> **Not found in source:** Repository query analysis requires code scan.
{{/if}}

### 10.3 PostgreSQL-Specific Type Mappings in Entities

**Source:** Entity field type extraction

{{#if metadata.entityTypeMappings}}
| Entity | Field | Java Type | Column Type | Oracle Mapping | Source |
|--------|-------|-----------|-------------|----------------|--------|
{{#each metadata.entityTypeMappings}}
| {{this.entity}} | {{this.field}} | {{this.javaType}} | {{this.columnType}} | {{this.oracleMapping}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Entity type mapping analysis requires code scan.
{{/if}}

---

## 11. Complexity Analysis

### 11.1 Migration Complexity by Dimension

**Source:** Multi-dimensional analysis of source artifacts

| Dimension | Score | Level | Primary Source |
|-----------|-------|-------|----------------|
| Schema & Data Types | {{metadata.complexity.schemaDataType}}/100 | {{metadata.complexity.schemaDataTypeLevel}} | DDL analysis |
| SQL & Query Rewrite | {{metadata.complexity.sqlQuery}}/100 | {{metadata.complexity.sqlQueryLevel}} | Query extraction |
| PL/pgSQL to PL/SQL | {{metadata.complexity.plpgsql}}/100 | {{metadata.complexity.plpgsqlLevel}} | Function analysis |
| Data Volume & Migration | {{metadata.complexity.dataVolume}}/100 | {{metadata.complexity.dataVolumeLevel}} | Statistics |
| Application/ORM Dependency | {{metadata.complexity.application}}/100 | {{metadata.complexity.applicationLevel}} | Code analysis |
| Extensions & Features | {{metadata.complexity.extensions}}/100 | {{metadata.complexity.extensionsLevel}} | Extension scan |
| **Overall** | **{{metadata.complexity.overall}}/100** | **{{metadata.complexity.overallLevel}}** | Combined |

### 11.2 High Complexity Components

**Source:** Complexity scoring from analysis

{{#if metadata.highComplexity}}
| Component | Type | Complexity | Issues | Source |
|-----------|------|------------|--------|--------|
{{#each metadata.highComplexity}}
| {{this.name}} | {{this.type}} | {{this.score}} | {{this.issues}} | `{{this.source}}` |
{{/each}}
{{else}}
> **Not found in source:** Complexity ranking requires complete analysis.
{{/if}}

---

## Appendices

### Appendix A: Complete Table List

{{#if appendix.tables}}
| Table | Schema | Columns | PG Types | Rows | Source |
|-------|--------|---------|----------|------|--------|
{{#each appendix.tables}}
| {{this.name}} | {{this.schema}} | {{this.columns}} | {{this.pgTypes}} | {{this.rows}} | `{{this.source}}` |
{{/each}}
{{/if}}

### Appendix B: Function/Procedure List

{{#if appendix.functions}}
| Name | Type | Parameters | Return | Language | Source |
|------|------|------------|--------|----------|--------|
{{#each appendix.functions}}
| {{this.name}} | {{this.type}} | {{this.params}} | {{this.return}} | {{this.language}} | `{{this.source}}` |
{{/each}}
{{/if}}

### Appendix C: PostgreSQL Feature Detection Summary

{{#if appendix.featureSummary}}
| Feature | Count | Oracle Support | Migration Impact |
|---------|-------|----------------|------------------|
{{#each appendix.featureSummary}}
| {{this.feature}} | {{this.count}} | {{this.oracleSupport}} | {{this.impact}} |
{{/each}}
{{/if}}

---

## Traceability Note

All data in this document is extracted directly from PostgreSQL database catalogs, DDL scripts, and application source code. Each item includes a source reference. Items marked "Not found in source" indicate that the analysis tools could not automatically extract this information.

---

## Document History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| {{version}} | {{generated_date}} | {{author}} | Auto-generated from source analysis |

---

**End of As-Is Analysis Document**
